function Timer(g,c){var k=this,a=true,h=c||-1,e=0;var j=$(k);k.timer=null;k.delay=g||1000;var f=function(){if(h!=-1){e=e+1;var l=e<h;j.trigger(Timer.TICK,{current_count:e,last:!l});if(a){return}if(l){d()}else{b()}}else{e=e+1;j.trigger(Timer.TICK,{current_count:e});if(a){return}d()}};var d=function(){k.timer=setTimeout(f,k.delay)};var i=function(){e=0;a=false};var b=function(){a=true};k.start=function(){if(!k.is_running()){d();i()}};k.stop=function(l){if(!!l){if(k.timer){clearTimeout(k.timer)}}b()};k.is_running=function(){return !a};k.bind=function(l,m){j.bind(l,m)};k.current_count=function(){return e};k.unbind=function(l,m){j.unbind(l,m)};k.tick=function(l){j.bind(Timer.TICK,l)}}Timer.TICK="tick";